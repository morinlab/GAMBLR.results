<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>NA • GAMBLR.results</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css"><script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet"><script src="pkgdown.js"></script><meta property="og:title" content="NA"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-title-body">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">GAMBLR.results</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="reference/index.html">Reference</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
    <div class="page-header">
      <h1>NA</h1>
    </div>

<div class="section level2">
<h2 id="running-gamblr-on-your-own-computer">Running GAMBLR On Your Own Computer<a class="anchor" aria-label="anchor" href="#running-gamblr-on-your-own-computer"></a></h2>
<p>If you don’t have access to gphost on GSC, no worries, you can still execute GAMBLR functions in another way. Remote support was developed for this purpose. This section explains how to run GAMBLR remote on a <em>local machine</em> (i.e on your own computer). There are two different approaches to get this to work, both with its own advantages and limitations. We will be going over both in this next section.</p>
<div class="section level3">
<h3 id="approach-1---quick-start">Approach 1 - Quick Start<a class="anchor" aria-label="anchor" href="#approach-1---quick-start"></a></h3>
<p>This section details how to deploy GAMBLR with limited functionality. This approach requires either a working GSC VPN connection (or is directly accessible if connected to the GSC network).</p>
<div class="section level4">
<h4 id="setup-vpn-connection">Setup VPN Connection<a class="anchor" aria-label="anchor" href="#setup-vpn-connection"></a></h4>
<ol style="list-style-type: decimal"><li>You need a working GSC VPN connection to use this approach. For setting up a VPN connection see <a href="https://www.bcgsc.ca/wiki/pages/viewpage.action?spaceKey=SysHelp&amp;title=Learn+how+to+use+VPN" class="external-link">this</a> guide. Keep in mind that a <strong>VPN connection is not needed</strong> if your already connected to the GSC network.</li>
</ol></div>
<div class="section level4">
<h4 id="clone-repos-update-paths-install-and-load-r-packages">Clone Repos, Update Paths, Install and Load R Packages<a class="anchor" aria-label="anchor" href="#clone-repos-update-paths-install-and-load-r-packages"></a></h4>
<ol start="2" style="list-style-type: decimal"><li>Clone <a href="https://github.com/morinlab/gambl" class="external-link">GAMBL</a> and <a href="https://github.com/morinlab/GAMBLR" class="external-link">GAMBLR</a> to your local computer. From your terminal run the following commands (folder structures can be whatever you want…)</li>
</ol><pre><code>mkdir ~/git_repos
cd ~/git_repos #set as working directiory
git clone https://github.com/morinlab/gambl
git clone https://github.com/morinlab/GAMBLR</code></pre>
<ol start="3" style="list-style-type: decimal"><li>Update the <strong>paths</strong> in your local <a href="https://github.com/morinlab/GAMBLR/blob/master/config.yml" class="external-link">config.yml</a> (GAMBLR) to point to the recently cloned, local <strong>gambl</strong> folder (repo_base). In your favorite text editor, edit the line shown below (under <em>remote</em> ). Similarly, you will also need to edit the line above it to point to where you will eventually sync the GAMBL results.</li>
</ol><pre><code><span><span class="va">remote</span><span class="op">:</span></span>
<span>    <span class="va">project_base</span><span class="op">:</span> <span class="st">"/path/to/your/local/gambl_results_directory/"</span></span>
<span>    <span class="va">repo_base</span><span class="op">:</span> <span class="st">"/path/to/your/local/gambl_repo/"</span></span></code></pre>
<ol start="4" style="list-style-type: decimal"><li>Set the <strong>working directory</strong> in Rstudio. Open Rstudio on your local machine and locate the repo you cloned previously.</li>
</ol><pre><code><span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">setwd</a></span><span class="op">(</span><span class="st">"~/git_repos/GAMBLR"</span><span class="op">)</span></span></code></pre>
<ol start="5" style="list-style-type: decimal"><li>Install GAMBLR in your local R studio.</li>
</ol><pre><code><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org/reference/install.html" class="external-link">install</a></span><span class="op">(</span><span class="op">)</span></span></code></pre>
<ol start="6" style="list-style-type: decimal"><li>Load packages.</li>
</ol><pre><code><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">GAMBLR</span><span class="op">)</span></span></code></pre>
</div>
<div class="section level4">
<h4 id="set-config-to-remote">Set Config To Remote<a class="anchor" aria-label="anchor" href="#set-config-to-remote"></a></h4>
<ol start="7" style="list-style-type: decimal"><li>Execute the following in Rstudio console to make use of the updated paths in the <a href="https://github.com/morinlab/GAMBLR/blob/master/config.yml" class="external-link">config.yml</a> from step 3.</li>
</ol><pre><code><span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span>R_CONFIG_ACTIVE <span class="op">=</span> <span class="st">"remote"</span><span class="op">)</span></span></code></pre>
<p>Alternatively, you can add the content of <a href="https://github.com/morinlab/GAMBLR/blob/master/.Rprofile" class="external-link">~/git_repos/GAMBLR/.Rprofile</a> to your <code>~/.Rprofile</code> file. In this way, you do not need to enter the command above every time you start your R session (recommended).</p>
<pre><code>cat ~/git_repos/GAMBLR/.Rprofile &gt;&gt; ~/.Rprofile</code></pre>
</div>
<div class="section level4">
<h4 id="run-gamblr">Run GAMBLR<a class="anchor" aria-label="anchor" href="#run-gamblr"></a></h4>
<ol start="8" style="list-style-type: decimal"><li>Test if setup was successful (e.g call <code><a href="reference/get_gambl_metadata.html">get_gambl_metadata()</a></code> to retrieve meta data for all gambl samples).</li>
</ol><pre><code><span><span class="fu"><a href="reference/get_gambl_metadata.html">get_gambl_metadata</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="approach-2---the-full-installation-snakemake">Approach 2 - The Full Installation (Snakemake)<a class="anchor" aria-label="anchor" href="#approach-2---the-full-installation-snakemake"></a></h3>
<p>This section details how to obtain GAMBLR with <strong>full</strong> functionality, using a dedicated snake file to retrieve all necessary files and dependencies.</p>
<div class="section level4">
<h4 id="before-you-get-started">Before You Get Started<a class="anchor" aria-label="anchor" href="#before-you-get-started"></a></h4>
<ol style="list-style-type: decimal"><li>Make sure you have a working SSH key <strong>setup with a pass phrase</strong> . If not, follow instructions at <a href="https://www.bcgsc.ca/wiki/login.action?os_destination=%2Fpages%2Fviewpage.action%3FspaceKey%3DSysHelp%26title%3DSetup%2BPassword-less%2BSSH&amp;permissionViolation=true" class="external-link">GSC Wiki</a>. Warning, this will <strong>not</strong> work with a pass phrase-less SSH connection.</li>
</ol></div>
<div class="section level4">
<h4 id="clone-repos-and-set-up-environment">Clone Repos and Set Up Environment<a class="anchor" aria-label="anchor" href="#clone-repos-and-set-up-environment"></a></h4>
<ol start="2" style="list-style-type: decimal"><li>Clone <a href="https://github.com/morinlab/gambl" class="external-link">GAMBL</a> and <a href="https://github.com/morinlab/GAMBLR" class="external-link">GAMBLR</a>.</li>
</ol><pre><code>mkdir ~/git_repos
cd ~/git_repos
git clone https://github.com/morinlab/gambl
git clone https://github.com/morinlab/GAMBLR</code></pre>
<ol start="3" style="list-style-type: decimal"><li>On your local machine, make a new directory called <strong>gambl_results</strong> , for example.</li>
</ol><pre><code>mkdir ~/gambl_results/</code></pre>
<ol start="4" style="list-style-type: decimal"><li>In the <a href="https://github.com/morinlab/GAMBLR/blob/master/config.yml" class="external-link">config.yml</a> file of your local <strong>GAMBLR</strong> folder, update paths under the <code>remote</code> field to point to the recently cloned local <strong>gambl</strong> folder ( <em>repo_base</em> ) and recently created <strong>gambl_results</strong> folder ( <em>project_base</em> ). Also, update the <em>host</em> field to contain your username (you can use any gphost here). For example:</li>
</ol><pre><code><span><span class="va">remote</span><span class="op">:</span></span>
<span>    <span class="va">project_base</span><span class="op">:</span> <span class="st">"~/gambl_results/"</span></span>
<span>    <span class="va">repo_base</span><span class="op">:</span> <span class="st">"~/git_repos/gambl/"</span></span>
<span>    <span class="va">...</span></span>
<span>    <span class="va">host</span><span class="op">:</span> <span class="st">"your_username@gphost01.bcgsc.ca"</span></span></code></pre>
<ol start="5" style="list-style-type: decimal"><li>Copy the following files (from your recently cloned <a href="https://github.com/morinlab/GAMBLR" class="external-link">GAMBLR</a> directory) into the folder from the previous step; <code>config.yml</code> and <code>get_gambl_results.smk</code>.</li>
</ol><pre><code>cp ~/git_repos/GAMBLR/config.yml ~/gambl_results/
cp ~/git_repos/GAMBLR/get_gambl_results.smk ~/gambl_results/</code></pre>
<ol start="6" style="list-style-type: decimal"><li>Add ENVVARS bash/zsh environment variables to your bashrc/zsh or some other way that will ensure they’re in your session (e.g. you can set them manually each time if you want, just make sure they are set). For example in your local terminal run the following commands (with updated values…).</li>
</ol><pre><code>export GSC_USERNAME="your_gsc_username"
export GSC_KEY="path_to_SSH_key_with_passphrase_from_step_1"
export GSC_PASSPHRASE="passpharase_from_step_1"</code></pre>
</div>
<div class="section level4">
<h4 id="install-gamblr-in-local-rstudio">Install GAMBLR In Local Rstudio<a class="anchor" aria-label="anchor" href="#install-gamblr-in-local-rstudio"></a></h4>
<ol start="7" style="list-style-type: decimal"><li>Open <strong>Rstudio</strong> (locally) and set the working directory to the folder you downloaded in step 2 (in the Rstudio console) and install GAMBLR.</li>
</ol><pre><code><span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">setwd</a></span><span class="op">(</span><span class="st">"~/git_repos/GAMBLR"</span><span class="op">)</span></span></code></pre>
<ol start="8" style="list-style-type: decimal"><li>Install and load GAMBLR into your local R session.</li>
</ol><pre><code><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org/reference/install.html" class="external-link">install</a></span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<div class="section level4">
<h4 id="create-and-setup-snakemake-environment">Create and Setup Snakemake Environment<a class="anchor" aria-label="anchor" href="#create-and-setup-snakemake-environment"></a></h4>
<ol start="9" style="list-style-type: decimal"><li>In the terminal on your local machine, create a new snakemake environment from the <a href="https://github.com/morinlab/GAMBLR/blob/master/get_gambl_results.yml" class="external-link">get_gambl_results.yml</a> file (<a href="https://github.com/morinlab/GAMBLR/blob/master/get_gambl_results_linux.yml" class="external-link">get_gambl_results_linux.yml</a> for Linux). Note that you can name this new environment whatever you would like. In this example, the new environment is called <strong>snakemake_gambl</strong> .</li>
</ol><pre><code>cd ~/gambl_results
conda env create --name snakemake_gambl --file ~/git_repos/GAMBLR/get_gambl_results.yml</code></pre>
<ol start="10" style="list-style-type: decimal"><li>Activate this newly created snakemake environment with:</li>
</ol><pre><code>conda activate snakemake_gambl</code></pre>
<ol start="11" style="list-style-type: decimal"><li>Retrieve necessary files (download a local copy of all files needed to run a collection of GAMBLR functions). It’s strongly advised to use <code>--cores 1</code> for this, since it seems to be the more stable option. In addition, if your sync gets interrupted, you only need restart the syncing of 1 file, compared to if you run on multiple cores.</li>
</ol><pre><code>snakemake -s get_gambl_results.smk --cores 1</code></pre>
</div>
<div class="section level4">
<h4 id="use-gamblr-functions-locally">Use GAMBLR Functions Locally<a class="anchor" aria-label="anchor" href="#use-gamblr-functions-locally"></a></h4>
<ol start="12" style="list-style-type: decimal"><li>In Rstudio (local), open <a href="https://github.com/morinlab/GAMBLR/blob/master/resources/test_remote.R" class="external-link">test_remote.R</a> in GAMBLR master folder.</li>
<li>Execute the following in Rstudio console to make use of the updated paths in the <a href="https://github.com/morinlab/GAMBLR/blob/master/config.yml" class="external-link">config.yml</a> from step 5.</li>
</ol><pre><code><span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span>R_CONFIG_ACTIVE <span class="op">=</span> <span class="st">"remote"</span><span class="op">)</span></span></code></pre>
<p>Alternatively, you can add the content of <a href="https://github.com/morinlab/GAMBLR/blob/master/.Rprofile" class="external-link">~/git_repos/GAMBLR/.Rprofile</a> to your <code>~/.Rprofile</code> file. In this way, you do not need to enter the command above every time you start your R session (recommended).</p>
<pre><code>cat ~/git_repos/GAMBLR/.Rprofile &gt;&gt; ~/.Rprofile</code></pre>
<ol start="14" style="list-style-type: decimal"><li>Check what files (if any) are currently missing.</li>
</ol><pre><code><span><span class="fu"><a href="reference/check_gamblr_config.html">check_gamblr_config</a></span><span class="op">(</span><span class="op">)</span></span></code></pre>
<ol start="15" style="list-style-type: decimal"><li>You should now be all set to explore a collection of GAMBLR function remotely on your local machine. For example you could try the following test code to ensure your setup was successful. For a set of comprehensive examples and tutorials, please refer to the <a href="https://github.com/morinlab/GAMBLR/blob/master/resources/test_remote.R" class="external-link">test_remote.R</a> script.</li>
</ol><pre><code><span><span class="fu"><a href="reference/get_gambl_metadata.html">get_gambl_metadata</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span></code></pre>
<p><strong>Note</strong> , if your seeing the following message when trying to use GAMBLR, please ensure that the config/gambl repo is set up properly (step <strong>5</strong> ) and that you are using the <em>remote</em> mode (step <strong>13</strong> ).</p>
<pre><code>get_gambl_metadata(seq_type_filter = "capture") %&gt;%
  pull(cohort) %&gt;%
  table()

Error: '/projects/rmorin/projects/gambl-repos/gambl-rmorin/data/metadata/gambl_all_outcomes.tsv' does not exist.</code></pre>
</div>
</div>
</div>

  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>

</div>



      <footer><div class="copyright">
  <p></p><p>Developed by Ryan Morin, Kostiantyn Dreval, Vladimir Souza.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

