<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Build UCSC browser track hub — build_browser_hub • GAMBLR.results</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Build UCSC browser track hub — build_browser_hub"><meta name="description" content="Create a directory that contains the track hub files. They are:
a hub.txt file (named as &amp;lt;projection&amp;gt;_hub.txt and marked with useOneFile on),
and a subdirectory (named as the projection in use) with the custom tracks to
be visualized in UCSC browser. The custom track regions contains the regions
from where SSMs were retrieved. All other custom tracks contain SSMs from samples
separated by the splitColumnName parameter, where each file is named according
to the value in splitColumnName that it refers to."><meta property="og:description" content="Create a directory that contains the track hub files. They are:
a hub.txt file (named as &amp;lt;projection&amp;gt;_hub.txt and marked with useOneFile on),
and a subdirectory (named as the projection in use) with the custom tracks to
be visualized in UCSC browser. The custom track regions contains the regions
from where SSMs were retrieved. All other custom tracks contain SSMs from samples
separated by the splitColumnName parameter, where each file is named according
to the value in splitColumnName that it refers to."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">GAMBLR.results</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.3</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/GAMBLR-results.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Developers</h6></li>
    <li><a class="dropdown-item" href="../articles/testing.html">Testing GAMBLR packages</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Build UCSC browser track hub</h1>

      <div class="d-none name"><code>build_browser_hub.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Create a directory that contains the track hub files. They are:
a hub.txt file (named as <code>&lt;projection&gt;_hub.txt</code> and marked with <code>useOneFile on</code>),
and a subdirectory (named as the projection in use) with the custom tracks to
be visualized in UCSC browser. The custom track <code>regions</code> contains the regions
from where SSMs were retrieved. All other custom tracks contain SSMs from samples
separated by the <code>splitColumnName</code> parameter, where each file is named according
to the value in <code>splitColumnName</code> that it refers to.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">build_browser_hub</span><span class="op">(</span></span>
<span>  <span class="va">maf_data</span>,</span>
<span>  <span class="va">regions_bed</span>,</span>
<span>  these_sample_ids <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  these_samples_metadata <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  these_seq_types <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"genome"</span>, <span class="st">"capture"</span><span class="op">)</span>,</span>
<span>  projection <span class="op">=</span> <span class="st">"grch37"</span>,</span>
<span>  local_web_host_dir <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  hub_dir <span class="op">=</span> <span class="st">"my_hub"</span>,</span>
<span>  splitColumnName <span class="op">=</span> <span class="st">"pathology"</span>,</span>
<span>  hub_name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/basename.html" class="external-link">basename</a></span><span class="op">(</span><span class="va">hub_dir</span><span class="op">)</span>,</span>
<span>  shortLabel <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/basename.html" class="external-link">basename</a></span><span class="op">(</span><span class="va">hub_dir</span><span class="op">)</span>,</span>
<span>  longLabel <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/basename.html" class="external-link">basename</a></span><span class="op">(</span><span class="va">hub_dir</span><span class="op">)</span>,</span>
<span>  <span class="va">contact_email</span>,</span>
<span>  visibility <span class="op">=</span> <span class="st">"squish"</span>,</span>
<span>  bigDataUrl_base <span class="op">=</span> <span class="st">"https://github.com/morinlab/LLMPP/blob/main"</span>,</span>
<span>  <span class="va">bedToBigBed_path</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-maf-data">maf_data<a class="anchor" aria-label="anchor" href="#arg-maf-data"></a></dt>
<dd><p>A MAF-format data frame with the SSMs to be visualized in the
UCSC browser. It can be filtered by regions and samples provided by parameters
<code>regions_bed</code> and <code>these_sample_ids</code>/<code>these_samples_metadata</code>, respectively.</p></dd>


<dt id="arg-regions-bed">regions_bed<a class="anchor" aria-label="anchor" href="#arg-regions-bed"></a></dt>
<dd><p>A BED-format table with the regions you want to retrieve SSMs
from. The columns 1, 2 and 3 must be chromosome names, start positions and
end positions, respectively. If not provided, the function defaults to aSHM
regions, <em>i.e.</em> one of <code><a href="https://rdrr.io/pkg/GAMBLR.data/man/grch37_ashm_regions.html" class="external-link">GAMBLR.data::grch37_ashm_regions</a></code> or <code><a href="https://rdrr.io/pkg/GAMBLR.data/man/hg38_ashm_regions.html" class="external-link">GAMBLR.data::hg38_ashm_regions</a></code>,
which is chosen automatically depending on the provided <code>projection</code>.</p></dd>


<dt id="arg-these-sample-ids">these_sample_ids<a class="anchor" aria-label="anchor" href="#arg-these-sample-ids"></a></dt>
<dd><p>A vector of sample IDs that you want results for.</p></dd>


<dt id="arg-these-samples-metadata">these_samples_metadata<a class="anchor" aria-label="anchor" href="#arg-these-samples-metadata"></a></dt>
<dd><p>A metadata table (with sample IDs in a column) to
subset the samples of interest.</p></dd>


<dt id="arg-these-seq-types">these_seq_types<a class="anchor" aria-label="anchor" href="#arg-these-seq-types"></a></dt>
<dd><p>A vector of one or more seq types you want results for.
Possible values are "genome" or "capture". If more than
one seq type is provided, for each value in <code>splitColumnName</code>, the function
creates a separate track for each provided seq type. The default is
<code>c("genome", "capture")</code>. See the <strong>Details</strong> section for more information.</p></dd>


<dt id="arg-projection">projection<a class="anchor" aria-label="anchor" href="#arg-projection"></a></dt>
<dd><p>The projection genome build. One of "grch37" (default) or "hg38".</p></dd>


<dt id="arg-local-web-host-dir">local_web_host_dir<a class="anchor" aria-label="anchor" href="#arg-local-web-host-dir"></a></dt>
<dd><p>Path to the directory where is your local copy of the
web host to be used. For example, if the hub should be hosted on GitHub,
<code>local_web_host_dir</code> should be the path to your local copy of the repository
directory. Default is NULL.</p></dd>


<dt id="arg-hub-dir">hub_dir<a class="anchor" aria-label="anchor" href="#arg-hub-dir"></a></dt>
<dd><p>Path to the directory (inside a web host) where you want to build
your track hub. If this directory does not exist, it will be created.</p></dd>


<dt id="arg-splitcolumnname">splitColumnName<a class="anchor" aria-label="anchor" href="#arg-splitcolumnname"></a></dt>
<dd><p>An single string to indicate which metadata column is used
to split the MAF data into custom track files. Default is "pathology".</p></dd>


<dt id="arg-hub-name">hub_name<a class="anchor" aria-label="anchor" href="#arg-hub-name"></a></dt>
<dd><p>A string with the hub name (without spaces) to fill in the <code>hub</code>
field of the hub.txt file. Default is <code>basename(hub_dir)</code>.</p></dd>


<dt id="arg-shortlabel">shortLabel<a class="anchor" aria-label="anchor" href="#arg-shortlabel"></a></dt>
<dd><p>A string with the short hub label (maximum of 17 characters
recommended; spaces are allowed) to fill in the <code>shortLabel</code> field of the
hub.txt file. Default is <code>basename(hub_dir)</code>.</p></dd>


<dt id="arg-longlabel">longLabel<a class="anchor" aria-label="anchor" href="#arg-longlabel"></a></dt>
<dd><p>A string with the long hub label (maximum of 80 characters
recommended; spaces are allowed) to fill in the <code>longLabel</code> field of the
hub.txt file. Default is <code>basename(hub_dir)</code>.</p></dd>


<dt id="arg-contact-email">contact_email<a class="anchor" aria-label="anchor" href="#arg-contact-email"></a></dt>
<dd><p>Required parameter. A string with the contact email to fill
in the <code>email</code> field of the hub.txt file.</p></dd>


<dt id="arg-visibility">visibility<a class="anchor" aria-label="anchor" href="#arg-visibility"></a></dt>
<dd><p>A string that controls the track visibility mode. Possible
values are "pack", "dense", "full", or "squish" (default).</p></dd>


<dt id="arg-bigdataurl-base">bigDataUrl_base<a class="anchor" aria-label="anchor" href="#arg-bigdataurl-base"></a></dt>
<dd><p>A string with the base path of the web location of the
tracks' data files (<code>bigDataUrl</code> fields from the hub.txt file). For example,
if the hub should be hosted on GitHub, <code>bigDataUrl_base</code> should be something
like "https://github.com/morinlab/LLMPP/blob/main" (the default). See how the
track's paths from the bigDataUrl fields are set in the <strong>Details</strong> section.</p></dd>


<dt id="arg-bedtobigbed-path">bedToBigBed_path<a class="anchor" aria-label="anchor" href="#arg-bedtobigbed-path"></a></dt>
<dd><p>Path to your local <code>bedToBigBed</code> UCSC tool. If missing,
<code><a href="https://rdrr.io/pkg/GAMBLR.helpers/man/check_config_value.html" class="external-link">GAMBLR.helpers::check_config_value</a></code> is called internally and the <code>bedToBigBed</code>
path is obtained from the <code>config.yml</code> file saved in the current working
directory.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Nothing.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p><code>build_browser_hub</code> will create a custom track file for each combination of
<code>these_seq_types</code> and <code>splitColumnName</code> (if mutations can be found). Custom
track files are named as <code>&lt;a_seq_type_value&gt;_&lt;a_splitColumnName_value&gt;.bb</code>.</p>
<p>The <code>bigDataUrl</code> field of a track in the hub.txt file is defined in
the following way:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">file.path</span>(bigDataUrl_base, hub_dir, projection,</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>          <span class="fu">paste0</span>(track_file_names[i], <span class="st">"?raw=true</span><span class="sc">\n</span><span class="st">"</span>))</span></code></pre><p></p></div>
<p>where <code>track_file_names[i]</code> is the custom track file name.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># create a track hub in LLMPP GitHub repo</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">GAMBLR.data</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">local_web_host_dir</span> <span class="op">=</span> <span class="st">"~/repos/LLMPP"</span></span></span>
<span class="r-in"><span><span class="va">hub_dir</span> <span class="op">=</span> <span class="st">"hubs/ashm_test"</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">my_meta</span> <span class="op">=</span> <span class="fu"><a href="get_gambl_metadata.html">get_gambl_metadata</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span> </span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">pathology</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"BL"</span>, <span class="st">"DLBCL"</span>, <span class="st">"FL"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">build_browser_hub</span><span class="op">(</span></span></span>
<span class="r-in"><span>  these_samples_metadata <span class="op">=</span> <span class="va">my_meta</span>,</span></span>
<span class="r-in"><span>  these_seq_types <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"genome"</span>, <span class="st">"capture"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  projection <span class="op">=</span> <span class="st">"grch37"</span>,</span></span>
<span class="r-in"><span>  local_web_host_dir <span class="op">=</span> <span class="va">local_web_host_dir</span>,</span></span>
<span class="r-in"><span>  hub_dir <span class="op">=</span> <span class="va">hub_dir</span>,</span></span>
<span class="r-in"><span>  splitColumnName <span class="op">=</span> <span class="st">"pathology"</span>,</span></span>
<span class="r-in"><span>  longLabel <span class="op">=</span> <span class="st">"Public aSHM mutations separated by pathologies"</span>,</span></span>
<span class="r-in"><span>  contact_email <span class="op">=</span> <span class="st">"rdmorin@sfu.ca"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Ryan Morin, Kostiantyn Dreval, Vladimir Souza.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.9000.</p>
</div>

    </footer></div>





  </body></html>

