<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Build UCSC browser track hub — build_browser_hub • GAMBLR.results</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Build UCSC browser track hub — build_browser_hub"><meta property="og:description" content="Create a directory that contains the track hub files. They are:
a hub.txt file (named as &amp;lt;projection&amp;gt;_hub.txt and marked with useOneFile on),
and a subdirectory (named as the projection in use) with the custom tracks to
be visualized in UCSC browser. The custom track regions contains the regions
from where SSMs were retrieved. All other custom tracks contain SSMs from samples
separated by the splitColumnName parameter, where each file is named according
to the value in splitColumnName that it refers to."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">GAMBLR.results</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/Overview.html">What's new in GAMBLR</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Build UCSC browser track hub</h1>

    <div class="hidden name"><code>build_browser_hub.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Create a directory that contains the track hub files. They are:
a hub.txt file (named as <code>&lt;projection&gt;_hub.txt</code> and marked with <code>useOneFile on</code>),
and a subdirectory (named as the projection in use) with the custom tracks to
be visualized in UCSC browser. The custom track <code>regions</code> contains the regions
from where SSMs were retrieved. All other custom tracks contain SSMs from samples
separated by the <code>splitColumnName</code> parameter, where each file is named according
to the value in <code>splitColumnName</code> that it refers to.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">build_browser_hub</span><span class="op">(</span></span>
<span>  <span class="va">maf_data</span>,</span>
<span>  <span class="va">regions_bed</span>,</span>
<span>  these_sample_ids <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  these_samples_metadata <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  these_seq_types <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"genome"</span>, <span class="st">"capture"</span><span class="op">)</span>,</span>
<span>  projection <span class="op">=</span> <span class="st">"grch37"</span>,</span>
<span>  local_web_host_dir <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  hub_dir <span class="op">=</span> <span class="st">"my_hub"</span>,</span>
<span>  splitColumnName <span class="op">=</span> <span class="st">"pathology"</span>,</span>
<span>  hub_name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/basename.html" class="external-link">basename</a></span><span class="op">(</span><span class="va">hub_dir</span><span class="op">)</span>,</span>
<span>  shortLabel <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/basename.html" class="external-link">basename</a></span><span class="op">(</span><span class="va">hub_dir</span><span class="op">)</span>,</span>
<span>  longLabel <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/basename.html" class="external-link">basename</a></span><span class="op">(</span><span class="va">hub_dir</span><span class="op">)</span>,</span>
<span>  <span class="va">contact_email</span>,</span>
<span>  visibility <span class="op">=</span> <span class="st">"squish"</span>,</span>
<span>  bigDataUrl_base <span class="op">=</span> <span class="st">"https://github.com/morinlab/LLMPP/blob/main"</span>,</span>
<span>  <span class="va">bedToBigBed_path</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-maf-data">maf_data<a class="anchor" aria-label="anchor" href="#arg-maf-data"></a></dt>
<dd><p>A MAF-format data frame with the SSMs to be visualized in the
UCSC browser. It can be filtered by regions and samples provided by parameters
<code>regions_bed</code> and <code>these_sample_ids</code>/<code>these_samples_metadata</code>, respectively.</p></dd>


<dt id="arg-regions-bed">regions_bed<a class="anchor" aria-label="anchor" href="#arg-regions-bed"></a></dt>
<dd><p>A BED-format table with the regions you want to retrieve SSMs
from. The columns 1, 2 and 3 must be chromosome names, start positions and
end positions, respectively. If not provided, the function defaults to aSHM
regions, <em>i.e.</em> one of <code><a href="https://rdrr.io/pkg/GAMBLR.data/man/grch37_ashm_regions.html" class="external-link">GAMBLR.data::grch37_ashm_regions</a></code> or <code><a href="https://rdrr.io/pkg/GAMBLR.data/man/hg38_ashm_regions.html" class="external-link">GAMBLR.data::hg38_ashm_regions</a></code>,
which is chosen automatically depending on the provided <code>projection</code>.</p></dd>


<dt id="arg-these-sample-ids">these_sample_ids<a class="anchor" aria-label="anchor" href="#arg-these-sample-ids"></a></dt>
<dd><p>A vector of sample IDs that you want results for.</p></dd>


<dt id="arg-these-samples-metadata">these_samples_metadata<a class="anchor" aria-label="anchor" href="#arg-these-samples-metadata"></a></dt>
<dd><p>A metadata table (with sample IDs in a column) to
subset the samples of interest.</p></dd>


<dt id="arg-these-seq-types">these_seq_types<a class="anchor" aria-label="anchor" href="#arg-these-seq-types"></a></dt>
<dd><p>A vector of one or more seq types you want results for.
Possible values are "genome" or "capture". If more than
one seq type is provided, for each value in <code>splitColumnName</code>, the function
creates a separate track for each provided seq type. The default is
<code>c("genome", "capture")</code>. See the <strong>Details</strong> section for more information.</p></dd>


<dt id="arg-projection">projection<a class="anchor" aria-label="anchor" href="#arg-projection"></a></dt>
<dd><p>The projection genome build. One of "grch37" (default) or "hg38".</p></dd>


<dt id="arg-local-web-host-dir">local_web_host_dir<a class="anchor" aria-label="anchor" href="#arg-local-web-host-dir"></a></dt>
<dd><p>Path to the directory where is your local copy of the
web host to be used. For example, if the hub should be hosted on GitHub,
<code>local_web_host_dir</code> should be the path to your local copy of the repository
directory. Default is NULL.</p></dd>


<dt id="arg-hub-dir">hub_dir<a class="anchor" aria-label="anchor" href="#arg-hub-dir"></a></dt>
<dd><p>Path to the directory (inside a web host) where you want to build
your track hub. If this directory does not exist, it will be created.</p></dd>


<dt id="arg-splitcolumnname">splitColumnName<a class="anchor" aria-label="anchor" href="#arg-splitcolumnname"></a></dt>
<dd><p>An single string to indicate which metadata column is used
to split the MAF data into custom track files. Default is "pathology".</p></dd>


<dt id="arg-hub-name">hub_name<a class="anchor" aria-label="anchor" href="#arg-hub-name"></a></dt>
<dd><p>A string with the hub name (without spaces) to fill in the <code>hub</code>
field of the hub.txt file. Default is <code>basename(hub_dir)</code>.</p></dd>


<dt id="arg-shortlabel">shortLabel<a class="anchor" aria-label="anchor" href="#arg-shortlabel"></a></dt>
<dd><p>A string with the short hub label (maximum of 17 characters
recommended; spaces are allowed) to fill in the <code>shortLabel</code> field of the
hub.txt file. Default is <code>basename(hub_dir)</code>.</p></dd>


<dt id="arg-longlabel">longLabel<a class="anchor" aria-label="anchor" href="#arg-longlabel"></a></dt>
<dd><p>A string with the long hub label (maximum of 80 characters
recommended; spaces are allowed) to fill in the <code>longLabel</code> field of the
hub.txt file. Default is <code>basename(hub_dir)</code>.</p></dd>


<dt id="arg-contact-email">contact_email<a class="anchor" aria-label="anchor" href="#arg-contact-email"></a></dt>
<dd><p>Required parameter. A string with the contact email to fill
in the <code>email</code> field of the hub.txt file.</p></dd>


<dt id="arg-visibility">visibility<a class="anchor" aria-label="anchor" href="#arg-visibility"></a></dt>
<dd><p>A string that controls the track visibility mode. Possible
values are "pack", "dense", "full", or "squish" (default).</p></dd>


<dt id="arg-bigdataurl-base">bigDataUrl_base<a class="anchor" aria-label="anchor" href="#arg-bigdataurl-base"></a></dt>
<dd><p>A string with the base path of the web location of the
tracks' data files (<code>bigDataUrl</code> fields from the hub.txt file). For example,
if the hub should be hosted on GitHub, <code>bigDataUrl_base</code> should be something
like "https://github.com/morinlab/LLMPP/blob/main" (the default). See how the
track's paths from the bigDataUrl fields are set in the <strong>Details</strong> section.</p></dd>


<dt id="arg-bedtobigbed-path">bedToBigBed_path<a class="anchor" aria-label="anchor" href="#arg-bedtobigbed-path"></a></dt>
<dd><p>Path to your local <code>bedToBigBed</code> UCSC tool. If missing,
<code><a href="https://rdrr.io/pkg/GAMBLR.helpers/man/check_config_value.html" class="external-link">GAMBLR.helpers::check_config_value</a></code> is called internally and the <code>bedToBigBed</code>
path is obtained from the <code>config.yml</code> file saved in the current working
directory.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>Nothing.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p><code>build_browser_hub</code> will create a custom track file for each combination of
<code>these_seq_types</code> and <code>splitColumnName</code> (if mutations can be found). Custom
track files are named as <code>&lt;a_seq_type_value&gt;_&lt;a_splitColumnName_value&gt;.bb</code>.</p>
<p>The <code>bigDataUrl</code> field of a track in the hub.txt file is defined in
the following way:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">file.path</span>(bigDataUrl_base, hub_dir, projection,</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>          <span class="fu">paste0</span>(track_file_names[i], <span class="st">"?raw=true</span><span class="sc">\n</span><span class="st">"</span>))</span></code></pre><p></p></div>
<p>where <code>track_file_names[i]</code> is the custom track file name.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># create a track hub in LLMPP GitHub repo</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">GAMBLR.data</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">local_web_host_dir</span> <span class="op">=</span> <span class="st">"~/repos/LLMPP"</span></span></span>
<span class="r-in"><span><span class="va">hub_dir</span> <span class="op">=</span> <span class="st">"hubs/ashm_test"</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">my_meta</span> <span class="op">=</span> <span class="fu"><a href="get_gambl_metadata.html">get_gambl_metadata</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span> </span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">pathology</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"BL"</span>, <span class="st">"DLBCL"</span>, <span class="st">"FL"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">build_browser_hub</span><span class="op">(</span></span></span>
<span class="r-in"><span>  these_samples_metadata <span class="op">=</span> <span class="va">my_meta</span>,</span></span>
<span class="r-in"><span>  these_seq_types <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"genome"</span>, <span class="st">"capture"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  projection <span class="op">=</span> <span class="st">"grch37"</span>,</span></span>
<span class="r-in"><span>  local_web_host_dir <span class="op">=</span> <span class="va">local_web_host_dir</span>,</span></span>
<span class="r-in"><span>  hub_dir <span class="op">=</span> <span class="va">hub_dir</span>,</span></span>
<span class="r-in"><span>  splitColumnName <span class="op">=</span> <span class="st">"pathology"</span>,</span></span>
<span class="r-in"><span>  longLabel <span class="op">=</span> <span class="st">"Public aSHM mutations separated by pathologies"</span>,</span></span>
<span class="r-in"><span>  contact_email <span class="op">=</span> <span class="st">"rdmorin@sfu.ca"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Ryan Morin, Kostiantyn Dreval, Vladimir Souza.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

      </footer></div>






  </body></html>

