<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Testing GAMBLR packages • GAMBLR.results</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><script src="testing_files/libs/quarto-html/popper.min.js"></script><script src="testing_files/libs/quarto-html/tippy.umd.min.js"></script><link href="testing_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="testing_files/libs/quarto-html/light-border.css" rel="stylesheet">
<!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Testing GAMBLR packages">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">GAMBLR.results</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.3</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/GAMBLR-results.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Developers</h6></li>
    <li><a class="dropdown-item" href="../articles/testing.html">Testing GAMBLR packages</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-quarto">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Testing GAMBLR packages</h1>





      <div class="d-none name"><code></code></div>
    </div>






    <p>Most GAMBLR repositories contain a <code>logExampleOutputs.R</code> script that you will find in your clone under the tools directory. If you are submitting a pull request, you are expected to have run this script and ensured that it completes. This guide explains how to do this.</p>
<div>
<blockquote>
<p><strong>Important</strong></p>
<p>If you modified/added code in GAMBLR.results, this must be on a computer that has direct access to all the relevant GAMBL output files. In other words, this would be run on a ssh session on one of the gphosts. Theoretically, you can test all the other packages on any computer with GAMBLR and its dependencies installed. In practice, you will probably always be running these commands within the GSC network.</p>
</blockquote>
</div>
<section class="level2"><h2 id="run-the-test-script">Run the test script<a class="anchor" aria-label="anchor" href="#run-the-test-script"></a>
</h2>
<p>First, you need to be in the top level directory of the repository:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> ~/git/GAMBLR.results/</span></code></pre></div>
<p>Assuming the installation of R on your path has all the dependencies installed, you can then simply run this command and wait for it to complete. The time this takes can vary a lot. Testing GAMBLR.results might take more than 30 minutes.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ex">Rscript</span> tools/logExampleOutputs.R</span></code></pre></div>
</section><section class="level2"><h2 id="check-outputs">Check outputs<a class="anchor" aria-label="anchor" href="#check-outputs"></a>
</h2>
<p>The top-level directory of each package should contain a file named <code>GAMBLR_examples_output.log</code>. This is the output of the script you just ran. Since it’s tracked by git, you should be able to compare the newly created version with the one in the master branch. The first few lines of this file from <code>GAMBLR.results</code> is shown below. You can view the entire file <a href="https://github.com/morinlab/GAMBLR.results/blob/main/GAMBLR_examples_output.log" class="external-link">here</a>.</p>
<pre><code>[1] "=== STARTED AT 2025-02-26 10:42:57.135744 ==="
── Running 71 example files ───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────── GAMBLR.results ──

&gt; my_metadata = suppressMessages(get_gambl_metadata())

&gt; some_coding_ssm = get_coding_ssm(these_samples_metadata = my_metadata,
+     projection = "grch37", this_seq_type = "genome") %&gt;% dplyr::filter(Hugo_Symbol %in%
+     c("EZH2", "MEF2B", "MYD88", "KMT2D")) %&gt;% dplyr::arrange(Hugo_Symbol)</code></pre>
<div>
<blockquote>
<p><strong>Important</strong></p>
<p>The easiest way to check this file for problems is to load it in Visual Studio Code after you’ve loaded the repository. As long as you have the git extension set up properly, you should see the differences automatically. The only changes you should see are the timestamps and possibly a few formatting differences in tabular output.</p>
</blockquote>
</div>
</section><section class="level2"><h2 id="fix-problems">Fix problems<a class="anchor" aria-label="anchor" href="#fix-problems"></a>
</h2>
<p>Depending on what you’ve done to the existing code, you may find that the log file is either truncated or the output from one or more functions has changed in a way that is unexpected (e.g. different numbers etc).</p>
<section class="level3"><h3 id="truncated-file">Truncated file?<a class="anchor" aria-label="anchor" href="#truncated-file"></a>
</h3>
<p>A truncated log file indicates that one of the existing examples failed to run. To debug this, you’ll need to determine which function is failing. You can usually determine the last function that ran successfully by looking at where the log was truncated. You should typically not have to change existing examples to fix these issues. Instead, you’ll need to determine what change in your pull request caused the example to break and address that code.</p>
</section><section class="level3"><h3 id="different-output">Different output<a class="anchor" aria-label="anchor" href="#different-output"></a>
</h3>
<p>You should identify the cause of these changes and, if necessary, fix any bugs that have caused them.</p>
</section></section><section class="level2"><h2 id="add-examples-test-again">Add examples, test again<a class="anchor" aria-label="anchor" href="#add-examples-test-again"></a>
</h2>
<p>If you have created new functionality in the GAMBLR package, it’s your responsibility to ensure the documentation for the affected function(s) is complete and up-to-date. This means that there should be an example in the documentation that demonstrates how the new functionality works. It’s probably easier to add the new example after you’ve ensured the current tests are completing successfully.</p>
<div>
<blockquote>
<p><strong>Important</strong></p>
<p>Don’t forget that you have to update the documentation before an example will be runnable:</p>
</blockquote>
</div>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org/reference/document.html" class="external-link">document</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Before you submit a pull request, be sure you’ve added the relevant example(s) and have re-run the tests. The log file with its entire output should be committed and included as part of your pull request.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> add GAMBLR_examples_output.log</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> commit <span class="at">-m</span> <span class="st">"testing completed"</span></span></code></pre></div>
<p>Once you’ve completed this, you should be ready to submit a pull request.</p>
</section><section class="level2"><h2 id="checklist-before-requesting-a-review">Checklist before requesting a review<a class="anchor" aria-label="anchor" href="#checklist-before-requesting-a-review"></a>
</h2>
<ul class="task-list">
<li><label><input type="checkbox">I tested the new function/functionality in a fresh workspace</label></li>
<li><label><input type="checkbox">I added at least one working example that demonstrates the new functionality (<em>if applicable</em>)</label></li>
<li><label><input type="checkbox">The test script tools/logExampleOutputs.R ran to completion</label></li>
<li><label><input type="checkbox">I included the file <code>GAMBLR_examples_output.log</code> in my pull request and confirm the changes to this file are expected</label></li>
</ul></section><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'light-border',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config);
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script></main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Ryan Morin, Kostiantyn Dreval, Vladimir Souza.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.9000.</p>
</div>

    </footer>
</div>





  </body>
</html>
